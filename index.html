
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Database Management</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Employee Database Management</h1>
            <p>Complete CRUD Operations for Employee Records</p>
        </div>

        <div class="content">
            <!-- Add/Edit Employee Form -->
            <div class="form-section">
                <h2 id="formTitle">Add New Employee</h2>
                <form id="employeeForm">
                    <input type="hidden" id="employeeId">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="department">Department *</label>
                            <select id="department" name="department" required>
                                <option value="">Select Department</option>
                                <option value="IT">Information Technology</option>
                                <option value="HR">Human Resources</option>
                                <option value="Finance">Finance</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Sales">Sales</option>
                                <option value="Operations">Operations</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="position">Position *</label>
                            <input type="text" id="position" name="position" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="salary">Salary</label>
                            <input type="number" id="salary" name="salary" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="hireDate">Hire Date</label>
                            <input type="date" id="hireDate" name="hireDate">
                        </div>
                    </div>
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button type="submit" class="btn btn-primary" id="submitBtn">Add Employee</button>
                        <button type="button" class="btn btn-secondary" id="cancelBtn" onclick="resetForm()">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Search Section -->
            <div class="search-section">
                <div class="search-row">
                    <div class="form-group">
                        <label for="searchInput">Search Employees</label>
                        <input type="text" id="searchInput" placeholder="Search by name, email, department, or position...">
                    </div>
                    <button type="button" class="btn btn-primary" onclick="searchEmployees()">Search</button>
                    <button type="button" class="btn btn-secondary" onclick="showAllEmployees()">Show All</button>
                </div>
            </div>

            <!-- Alert Messages -->
            <div id="alertContainer"></div>

            <!-- Employee Table -->
            <div class="table-section">
                <div class="table-header">
                    <h2>Employee Records</h2>
                </div>
                <div style="overflow-x: auto;">
                    <table id="employeeTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Department</th>
                                <th>Position</th>
                                <th>Salary</th>
                                <th>Hire Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="employeeTableBody">
                            <!-- Employee data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample employee data (in a real application, this would come from MySQL database)
        let employees = [
            {
                id: 1,
                firstName: 'John',
                lastName: 'Doe',
                email: 'john.doe@company.com',
                phone: '+1-555-0123',
                department: 'IT',
                position: 'Software Developer',
                salary: 75000,
                hireDate: '2023-01-15'
            },
            {
                id: 2,
                firstName: 'Jane',
                lastName: 'Smith',
                email: 'jane.smith@company.com',
                phone: '+1-555-0124',
                department: 'HR',
                position: 'HR Manager',
                salary: 65000,
                hireDate: '2022-08-20'
            },
            {
                id: 3,
                firstName: 'Mike',
                lastName: 'Johnson',
                email: 'mike.johnson@company.com',
                phone: '+1-555-0125',
                department: 'Finance',
                position: 'Financial Analyst',
                salary: 60000,
                hireDate: '2023-03-10'
            }
        ];

        let nextId = 4;
        let editingId = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadEmployees();
            
            // Form submission handler
            document.getElementById('employeeForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveEmployee();
            });

            // Search input handler
            document.getElementById('searchInput').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    showAllEmployees();
                } else {
                    searchEmployees();
                }
            });
        });

        // Load and display employees
        function loadEmployees(employeeList = employees) {
            const tbody = document.getElementById('employeeTableBody');
            tbody.innerHTML = '';

            if (employeeList.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" class="no-data">No employees found</td></tr>';
                return;
            }

            employeeList.forEach(employee => {
                const row = createEmployeeRow(employee);
                tbody.appendChild(row);
            });
        }

        // Create employee table row
        function createEmployeeRow(employee) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${employee.id}</td>
                <td>${employee.firstName} ${employee.lastName}</td>
                <td>${employee.email}</td>
                <td>${employee.phone || 'N/A'}</td>
                <td>${employee.department}</td>
                <td>${employee.position}</td>
                <td>${employee.salary ? '$' + employee.salary.toLocaleString() : 'N/A'}</td>
                <td>${employee.hireDate ? new Date(employee.hireDate).toLocaleDateString() : 'N/A'}</td>
                <td class="actions">
                    <button class="btn btn-warning" onclick="editEmployee(${employee.id})">Edit</button>
                    <button class="btn btn-danger" onclick="deleteEmployee(${employee.id})">Delete</button>
                </td>
            `;
            return row;
        }

        // Save employee (Create/Update)
        function saveEmployee() {
            const formData = new FormData(document.getElementById('employeeForm'));
            const employeeData = {
                firstName: formData.get('firstName').trim(),
                lastName: formData.get('lastName').trim(),
                email: formData.get('email').trim(),
                phone: formData.get('phone').trim(),
                department: formData.get('department'),
                position: formData.get('position').trim(),
                salary: formData.get('salary') ? parseFloat(formData.get('salary')) : null,
                hireDate: formData.get('hireDate') || null
            };

            // Validation
            if (!employeeData.firstName || !employeeData.lastName || !employeeData.email || 
                !employeeData.department || !employeeData.position) {
                showAlert('Please fill in all required fields.', 'error');
                return;
            }

            // Check for duplicate email (exclude current employee if editing)
            const existingEmployee = employees.find(emp => 
                emp.email.toLowerCase() === employeeData.email.toLowerCase() && 
                emp.id !== editingId
            );
            
            if (existingEmployee) {
                showAlert('An employee with this email already exists.', 'error');
                return;
            }

            if (editingId) {
                // Update existing employee
                const index = employees.findIndex(emp => emp.id === editingId);
                if (index !== -1) {
                    employees[index] = { ...employees[index], ...employeeData };
                    showAlert('Employee updated successfully!', 'success');
                }
            } else {
                // Create new employee
                employeeData.id = nextId++;
                employees.push(employeeData);
                showAlert('Employee added successfully!', 'success');
            }

            resetForm();
            loadEmployees();
        }

        // Edit employee
        function editEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (!employee) return;

            editingId = id;
            
            // Populate form
            document.getElementById('employeeId').value = employee.id;
            document.getElementById('firstName').value = employee.firstName;
            document.getElementById('lastName').value = employee.lastName;
            document.getElementById('email').value = employee.email;
            document.getElementById('phone').value = employee.phone || '';
            document.getElementById('department').value = employee.department;
            document.getElementById('position').value = employee.position;
            document.getElementById('salary').value = employee.salary || '';
            document.getElementById('hireDate').value = employee.hireDate || '';

            // Update form title and button
            document.getElementById('formTitle').textContent = 'Edit Employee';
            document.getElementById('submitBtn').textContent = 'Update Employee';

            // Scroll to form
            document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Delete employee
        function deleteEmployee(id) {
            if (confirm('Are you sure you want to delete this employee? This action cannot be undone.')) {
                const index = employees.findIndex(emp => emp.id === id);
                if (index !== -1) {
                    employees.splice(index, 1);
                    showAlert('Employee deleted successfully!', 'success');
                    loadEmployees();
                }
            }
        }

        // Reset form
        function resetForm() {
            document.getElementById('employeeForm').reset();
            document.getElementById('employeeId').value = '';
            editingId = null;
            document.getElementById('formTitle').textContent = 'Add New Employee';
            document.getElementById('submitBtn').textContent = 'Add Employee';
        }

        // Search employees
        function searchEmployees() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            if (!searchTerm) {
                showAllEmployees();
                return;
            }

            const filteredEmployees = employees.filter(employee => 
                employee.firstName.toLowerCase().includes(searchTerm) ||
                employee.lastName.toLowerCase().includes(searchTerm) ||
                employee.email.toLowerCase().includes(searchTerm) ||
                employee.department.toLowerCase().includes(searchTerm) ||
                employee.position.toLowerCase().includes(searchTerm)
            );

            loadEmployees(filteredEmployees);
        }

        // Show all employees
        function showAllEmployees() {
            document.getElementById('searchInput').value = '';
            loadEmployees();
        }

        // Show alert messages
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            alertContainer.innerHTML = '';
            alertContainer.appendChild(alertDiv);

            // Auto-hide after 5 seconds
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }
    </script>

    <!-- 
    MySQL Database Schema:
    
    CREATE DATABASE employee_db;
    USE employee_db;

    CREATE TABLE employees (
        id INT AUTO_INCREMENT PRIMARY KEY,
        first_name VARCHAR(50) NOT NULL,
        last_name VARCHAR(50) NOT NULL,
        email VARCHAR(100) NOT NULL UNIQUE,
        phone VARCHAR(20),
        department VARCHAR(50) NOT NULL,
        position VARCHAR(100) NOT NULL,
        salary DECIMAL(10,2),
        hire_date DATE,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    );

    INSERT INTO employees (first_name, last_name, email, phone, department, position, salary, hire_date) VALUES
    ('John', 'Doe', 'john.doe@company.com', '+1-555-0123', 'IT', 'Software Developer', 75000.00, '2023-01-15'),
    ('Jane', 'Smith', 'jane.smith@company.com', '+1-555-0124', 'HR', 'HR Manager', 65000.00, '2022-08-20'),
    ('Mike', 'Johnson', 'mike.johnson@company.com', '+1-555-0125', 'Finance', 'Financial Analyst', 60000.00, '2023-03-10');

    PHP Backend Example (save as api.php):
    
    <?php
    header('Content-Type: application/json');
    header('Access-Control-Allow-Origin: *');
    header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE');
    header('Access-Control-Allow-Headers: Content-Type');

    $servername = "localhost";
    $username = "your_username";
    $password = "your_password";
    $dbname = "employee_db";

    try {
        $pdo = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    } catch(PDOException $e) {
        die("Connection failed: " . $e->getMessage());
    }

    $method = $_SERVER['REQUEST_METHOD'];
    $input = json_decode(file_get_contents('php://input'), true);

    switch($method) {
        case 'GET':
            // Read employees
            $stmt = $pdo->query("SELECT * FROM employees ORDER BY id DESC");
            echo json_encode($stmt->fetchAll(PDO::FETCH_ASSOC));
            break;
            
        case 'POST':
            // Create employee
            $stmt = $pdo->prepare("INSERT INTO employees (first_name, last_name, email, phone, department, position, salary, hire_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)");
            $stmt->execute([$input['firstName'], $input['lastName'], $input['email'], $input['phone'], $input['department'], $input['position'], $input['salary'], $input['hireDate']]);
            echo json_encode(['success' => true, 'id' => $pdo->lastInsertId()]);
            break;
            
        case 'PUT':
            // Update employee
            $stmt = $pdo->prepare("UPDATE employees SET first_name=?, last_name=?, email=?, phone=?, department=?, position=?, salary=?, hire_date=? WHERE id=?");
            $stmt->execute([$input['firstName'], $input['lastName'], $input['email'], $input['phone'], $input['department'], $input['position'], $input['salary'], $input['hireDate'], $input['id']]);
            echo json_encode(['success' => true]);
            break;
            
        case 'DELETE':
            // Delete employee
            $stmt = $pdo->prepare("DELETE FROM employees WHERE id=?");
            $stmt->execute([$_GET['id']]);
            echo json_encode(['success' => true]);
            break;
    }
    ?>
    -->
</body>
</html>